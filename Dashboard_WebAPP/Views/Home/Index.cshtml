@{
    ViewBag.Title = "Home Page";
}
@model Dashboard_WebAPP.Models.ViewModel

<div class="jumbotron">
    <h1>ERS Monitoring Dashboard</h1>

    <p><a href="http://www.ers.my/" class="btn btn-primary btn-lg">Learn more about ERS! &raquo;</a></p>

    @using (Html.BeginForm("Index", "Home", FormMethod.Post))
    {
        @Html.DropDownList("ddlInverter", Model.GetInverterListItems(), new { @onchange = "this.form.submit();" })

    }
    @ViewData["selectedInverter"]

</div>

<a class="weatherwidget-io" href=@ViewBag.myURL data-label_1="@ViewBag.myDataLabel" data-label_2="WEATHER" data-theme="marine">SUNGAI BESI WEATHER</a>
<script>
    !function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = 'https://weatherwidget.io/js/widget.min.js'; fjs.parentNode.insertBefore(js, fjs); } }(document, 'script', 'weatherwidget-io-js');
</script>

<div>
    <div class="row">
        <div class="col-md-3 text-center">
            <div class="single-content text-center">
                <div class="item-icon"><i class="fa fa-cloud-download"></i></div>
                <div class="item-text">
                    <h3> @ViewBag.myDate </h3>
                    <p>Date & Time</p>
                </div>
            </div>
        </div>
        <div class="col-md-3 text-center">
            <div class="single-content text-center">
                <div class="item-icon"><i class="fa fa-users"></i></div>
                <div class="item-text">
                    <h3>@ViewBag.mySerial</h3>
                    <p>Serial Number</p>
                </div>
            </div>
        </div>
        <div class="col-md-3 text-center">
            <div class="single-content text-center">
                <div class="item-icon"><i class="fa fa-graduation-cap"></i></div>
                <div class="item-text">
                    <h3>@ViewBag.myMppts</h3>
                    <p>No. of MPPTs</p>
                </div>
            </div>
        </div>
    </div><!-- end row1 -->

    <div class="row">
        <br />
        <br />
    </div><!-- SPACING-->

    <div class="row">
        <div class="col-md-3 text-center">
            <div class="single-content text-center">
                <div class="item-icon"><i class="fa fa-cloud-download"></i></div>
                <div class="item-text">
                    <h3>@ViewBag.myDCc1</h3>
                    <p>DC Current 1</p>
                </div>
            </div>
        </div>
        <div class="col-md-3 text-center">
            <div class="single-content text-center">
                <div class="item-icon"><i class="fa fa-users"></i></div>
                <div class="item-text">
                    <h3>@ViewBag.myDCv1</h3>
                    <p>DC Voltage 1</p>
                </div>
            </div>
        </div>
        <div class="col-md-3 text-center">
            <div class="single-content text-center">
                <div class="item-icon"><i class="fa fa-graduation-cap"></i></div>
                <div class="item-text">
                    <h3>@ViewBag.myDCp1</h3>
                    <p>DC Power 1</p>
                </div>
            </div>
        </div>
    </div><!-- end row2 -->

    <div class="row">
        <br />
        <br />
    </div><!-- SPACING-->

    <div class="row">
        <div class="col-md-3 text-center">
            <div class="single-content text-center">
                <div class="item-icon"><i class="fa fa-cloud-download"></i></div>
                <div class="item-text">
                    <h3>@ViewBag.myDCc2</h3>
                    <p>DC Current 2</p>
                </div>
            </div>
        </div>
        <div class="col-md-3 text-center">
            <div class="single-content text-center">
                <div class="item-icon"><i class="fa fa-users"></i></div>
                <div class="item-text">
                    <h3>@ViewBag.myDCv2</h3>
                    <p>DC Voltage 2</p>
                </div>
            </div>
        </div>
        <div class="col-md-3 text-center">
            <div class="single-content text-center">
                <div class="item-icon"><i class="fa fa-graduation-cap"></i></div>
                <div class="item-text">
                    <h3>@ViewBag.myDCp2</h3>
                    <p>DC Power 2</p>
                </div>
            </div>
        </div>
    </div><!-- end row3 -->

    <div class="row">
        <br />
        <br />
    </div><!-- SPACING-->

    <div class="row">
        <div class="col-md-3 text-center">
            <div class="single-content text-center">
                <div class="item-icon"><i class="fa fa-cloud-download"></i></div>
                <div class="item-text">
                    <h3>@ViewBag.myTotalYield</h3>
                    <p>Total PV Energy</p>
                </div>
            </div>
        </div>
        <div class="col-md-3 text-center">
            <div class="single-content text-center">
                <div class="item-icon"><i class="fa fa-graduation-cap"></i></div>
                <div class="item-text">
                    <h3>@ViewBag.myDailyYield</h3>
                    <p>Daily PV Energy</p>
                </div>
            </div>
        </div>
        <div class="col-md-3 text-center">
            <div class="single-content text-center">
                <div class="item-icon"><i class="fa fa-users"></i></div>
                <div class="item-text">
                    <h3>@ViewBag.myCurrentYield</h3>
                    <p>Current PV Power</p>
                </div>
            </div>
        </div>
        <div class="col-md-3 text-center">
            <div class="single-content text-center">
                <div class="item-icon"><i class="fa fa-graduation-cap"></i></div>
                <div class="item-text">
                    <h3>@ViewBag.myCondition</h3>
                    <p>Inverter Condition</p>
                </div>
            </div>
        </div>
    </div><!-- end row4 -->
</div>


<div class="row">
    <br />
</div><!-- SPACING-->

<div>
    <button style="background-color:azure" onclick="daily('#powerChart1','#powerday','#powermonth', 'powerChart')" id="powerday">Day</button>
    <button style="background-color:lightblue" onclick="monthly('#powerChart1', '#powermonth', '#powerday', 'monthlyChart')" id="powermonth">Month</button>
</div>
<div class="jumbotron">
    <p id="title" class="lead">ERS SMA Graph</p>
    <img id="powerChart1" src="@Url.Action("powerChart","Home", new { serial_no = ViewBag.mySerial })" />
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script type="text/javascript">

    function daily(id, id1, id2, chartName) {
        $(id1).prop("disabled", true);
        $(id2).prop("disabled", false);

        $(id1).attr('style', 'background-color:azure');
        $(id2).attr('style', 'background-color:lightblue');

        var inStr = '@Url.Action("xChart","Home", new { serial_no = ViewBag.mySerial })';
        inStr = inStr.replace("xChart", chartName);
        $(id).attr('src', inStr);
    }

    function monthly(id, id1, id2, chartName) {
        $(id1).prop("disabled", true);
        $(id2).prop("disabled", false);

        $(id1).attr('style', 'background-color:azure');
        $(id2).attr('style', 'background-color:lightblue');

        var inStr = '@Url.Action("xChart","Home", new { serial_no = ViewBag.mySerial })';
        inStr = inStr.replace("xChart", chartName);
        $(id).attr('src', inStr);
    }

</script>

